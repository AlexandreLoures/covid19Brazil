, casosNovos = col_integer ()
, obitosAcumulado = col_integer ()
, obitosNovos = col_integer ()
, Recuperadosnovos = col_integer ()
, emAcompanhamentoNovos = col_integer()
)
)
covid1.2021 <- read_csv2 ('HIST_PAINEL_COVIDBR_2021_Parte1_26abr2022.csv'
, col_types = cols_only (regiao = col_character ()
, estado = col_character ()
, municipio = col_character ()
, coduf = col_integer ()
, codmun = col_integer ()
, data = col_date ()
, semanaEpi = col_integer ()
, populacaoTCU2019 = col_integer ()
, casosAcumulado = col_integer ()
, casosNovos = col_integer ()
, obitosAcumulado = col_integer ()
, obitosNovos = col_integer ()
, Recuperadosnovos = col_integer ()
, emAcompanhamentoNovos = col_integer()
)
)
covid2.2021 <- read_csv2 ('HIST_PAINEL_COVIDBR_2021_Parte2_26abr2022.csv'
, col_types = cols_only (regiao = col_character ()
, estado = col_character ()
, municipio = col_character ()
, coduf = col_integer ()
, codmun = col_integer ()
, data = col_date ()
, semanaEpi = col_integer ()
, populacaoTCU2019 = col_integer ()
, casosAcumulado = col_integer ()
, casosNovos = col_integer ()
, obitosAcumulado = col_integer ()
, obitosNovos = col_integer ()
, Recuperadosnovos = col_integer ()
, emAcompanhamentoNovos = col_integer()
)
)
covid1.2022 <- read_csv2 ('HIST_PAINEL_COVIDBR_2022_Parte1_26abr2022.csv'
, col_types = cols_only (regiao = col_character ()
, estado = col_character ()
, municipio = col_character ()
, coduf = col_integer ()
, codmun = col_integer ()
, data = col_date ()
, semanaEpi = col_integer ()
, populacaoTCU2019 = col_integer ()
, casosAcumulado = col_integer ()
, casosNovos = col_integer ()
, obitosAcumulado = col_integer ()
, obitosNovos = col_integer ()
, Recuperadosnovos = col_integer ()
, emAcompanhamentoNovos = col_integer()
)
)
covid2019 <- rbind (covid1.2020, covid2.2020
, covid1.2021, covid2.2021
, covid1.2022
)
rm (covid1.2020, covid2.2020
, covid1.2021, covid2.2021
, covid1.2022
); gc ()
covid2019 %<>% rename (region = regiao
, state = estado
, municipality = municipio
, date = data
, epidWeek = semanaEpi
, population = populacaoTCU2019
, accumCases = casosAcumulado
, newCases = casosNovos
, accumDeaths = obitosAcumulado
, newDeaths = obitosNovos
, newRecov = Recuperadosnovos
, followUp = emAcompanhamentoNovos
); gc ()
covid2019
brazil_total <- covid2019 %>% subset (region == 'Brasil' &
municipality == 'NA'
)
state_total <- covid2019 %>% subset (state != 'NA' &
codmun == 'NA'
)
brazil_city <- covid2019 %>% subset (municipality != 'NA'
)
region_total <- state_total %>% group_by (region & date) %>%
summary (accumCases = sum (accumCases)
)
brazil_total <- covid2019 %>% subset (region == 'Brasil' &
municipality == ' '
)
brazil_total <- covid2019 %>% subset (region == 'Brasil' &
municipality == 'NA'
)
View(brazil_total)
brazil_total <- covid2019 %>% subset (region == 'Brasil')
View(brazil_total)
View(brazil_total)
brazil_total %<>% select (-c (state, municipality, coduf, codmun)
)
state_total <- covid2019 %>% subset (state != 'NA' &
codmun == ''
)
teste <- covid2019
covid2019 %<>% mutate (codmun = ifelse (!is.na (codmun), codmun, 0
)
)
covid2019
state_total <- covid2019 %>% subset (state != 'NA' &
codmun == 0
)
View(state_total)
summary (state_total$codmun)
View(state_total)
state_total %<>% select (-c (municipality, codmun))
write_csv (brazil_total, 'brazil_total.csv')
getwd ()
setwd ('D:/OneDrive/academic/Packages R/covid19Brazil/covid19Brazil/csv')
rm (brazil_total); gc ()
write_csv (state_total, 'state_total.csv')
rm (state_total); gc ()
write_csv (brazil_city, 'brazil_city.csv')
rm (brazil_city); gc ()
install.packages("rticles")
covid19brazil::brazil_state
covid19brazil <- function () {
if (data == 'brazil_total') x <- brazil
if (data == 'brazil_region') x <- region
if (data == 'brazil_state') x <- state
if (data == 'brazil_municipality') x <- municipality
return (x)
}
covid19brazil::brazil_state
covid19brazil(brazil_state)
covid19brazil::brazil_total
rm (list = ls ()); gc ()
pkgs = installed.packages ()
if (!('tidyverse' %in% pkgs)) install.packages ('tidyverse')
if (!('magrittr' %in% pkgs)) install.packages ('magrittr')
if (!('geobr' %in% pkgs)) install.packages ('geobr')
library (tidyverse)
library (magrittr)
library (geobr)
setwd ('C:/Users/alexa/Desktop/HIST_PAINEL_COVIDBR_26abr2022')
covid19brazil <- function () {
covid1.2020 <- read_csv2 ('HIST_PAINEL_COVIDBR_2020_Parte1_26abr2022.csv'
, col_types = cols_only (regiao = col_character ()
, estado = col_character ()
, municipio = col_character ()
, coduf = col_integer ()
, codmun = col_integer ()
, data = col_date ()
, semanaEpi = col_integer ()
, populacaoTCU2019 = col_integer ()
, casosAcumulado = col_integer ()
, casosNovos = col_integer ()
, obitosAcumulado = col_integer ()
, obitosNovos = col_integer ()
, Recuperadosnovos = col_integer ()
, emAcompanhamentoNovos = col_integer()
)
)
covid2.2020 <- read_csv2 ('HIST_PAINEL_COVIDBR_2020_Parte2_26abr2022.csv'
, col_types = cols_only (regiao = col_character ()
, estado = col_character ()
, municipio = col_character ()
, coduf = col_integer ()
, codmun = col_integer ()
, data = col_date ()
, semanaEpi = col_integer ()
, populacaoTCU2019 = col_integer ()
, casosAcumulado = col_integer ()
, casosNovos = col_integer ()
, obitosAcumulado = col_integer ()
, obitosNovos = col_integer ()
, Recuperadosnovos = col_integer ()
, emAcompanhamentoNovos = col_integer()
)
)
covid1.2021 <- read_csv2 ('HIST_PAINEL_COVIDBR_2021_Parte1_26abr2022.csv'
, col_types = cols_only (regiao = col_character ()
, estado = col_character ()
, municipio = col_character ()
, coduf = col_integer ()
, codmun = col_integer ()
, data = col_date ()
, semanaEpi = col_integer ()
, populacaoTCU2019 = col_integer ()
, casosAcumulado = col_integer ()
, casosNovos = col_integer ()
, obitosAcumulado = col_integer ()
, obitosNovos = col_integer ()
, Recuperadosnovos = col_integer ()
, emAcompanhamentoNovos = col_integer()
)
)
covid2.2021 <- read_csv2 ('HIST_PAINEL_COVIDBR_2021_Parte2_26abr2022.csv'
, col_types = cols_only (regiao = col_character ()
, estado = col_character ()
, municipio = col_character ()
, coduf = col_integer ()
, codmun = col_integer ()
, data = col_date ()
, semanaEpi = col_integer ()
, populacaoTCU2019 = col_integer ()
, casosAcumulado = col_integer ()
, casosNovos = col_integer ()
, obitosAcumulado = col_integer ()
, obitosNovos = col_integer ()
, Recuperadosnovos = col_integer ()
, emAcompanhamentoNovos = col_integer()
)
)
covid1.2022 <- read_csv2 ('HIST_PAINEL_COVIDBR_2022_Parte1_26abr2022.csv'
, col_types = cols_only (regiao = col_character ()
, estado = col_character ()
, municipio = col_character ()
, coduf = col_integer ()
, codmun = col_integer ()
, data = col_date ()
, semanaEpi = col_integer ()
, populacaoTCU2019 = col_integer ()
, casosAcumulado = col_integer ()
, casosNovos = col_integer ()
, obitosAcumulado = col_integer ()
, obitosNovos = col_integer ()
, Recuperadosnovos = col_integer ()
, emAcompanhamentoNovos = col_integer()
)
)
covid2019 <- rbind (covid1.2020, covid2.2020
, covid1.2021, covid2.2021
, covid1.2022
)
rm (covid1.2020, covid2.2020
, covid1.2021, covid2.2021
, covid1.2022
); gc ()
covid2019 %<>% rename (region = regiao
, state = estado
, municipality = municipio
, date = data
, epidWeek = semanaEpi
, population = populacaoTCU2019
, accumCases = casosAcumulado
, newCases = casosNovos
, accumDeaths = obitosAcumulado
, newDeaths = obitosNovos
, newRecov = Recuperadosnovos
, followUp = emAcompanhamentoNovos
); gc ()
# ---- IBGE shapes files ----
region <- read_region (year = 2020); gc ()
region %<>% select (-c (code_region
)
); gc ()
region %<>% rename (region = name_region)
state <- read_state (code_state = 'all', year = 2020); gc ()
state %<>% select (-c (abbrev_state, name_state, code_region
, name_region
)
); gc ()
state %<>% rename (coduf = code_state)
municipality <- read_municipality (code_muni = 'all', year = 2020); gc ()
municipality %<>% select (- c(name_muni, code_state, abbrev_state
, name_state, code_region, name_region
)
); gc ()
municipality %<>% rename (codmun = code_muni)
setwd ('D:/OneDrive/academic/PackagesR/covid19Brazil/covid19Brazil/csv')
# ---- Brazil total ----
brazil_total <- covid2019 %>% subset (region == 'Brasil'); gc ()
brazil_total %<>% select (-c (state, municipality, coduf, codmun)
); gc ()
write_csv (brazil_total, 'brazil_total.csv')
rm (brazil_total); gc ()
# ---- State total ----
covid2019 %<>% mutate (codmun = ifelse (!is.na (codmun), codmun, 0
)
)
brazil_state <- covid2019 %>% subset (state != 'NA' &
codmun == 0
); gc ()
brazil_state %<>% select (-c (municipality, codmun)
); gc ()
# brazil_state %<>% full_join (state, by = 'coduf')
write_csv (brazil_state, 'brazil_state.csv')
# rm (brazil_state); gc ()
# ---- Brazil municipality ----
brazil_municipality <- covid2019 %>% subset (municipality != 'NA'
); gc ()
# brazil_municipality %<>% full_join (municipality, by = 'codmun')
write_csv (brazil_municipality, 'brazil_municipality.csv')
rm (brazil_municipality); gc ()
# ---- Region total ----
brazil_region <- state_total %>% group_by (region, date) %>%
summarise (population = sum (population)
, accumCases = sum (accumCases)
, newCases = sum (newCases)
, accumDeaths = sum (accumDeaths)
, newDeaths = sum (newDeaths)
, newRecov = sum (newRecov)
, followUp = sum (followUp)
)
# brazil_region %<>% full_join (region, by = 'region')
write_csv (brazil_region, 'brazil_region.csv')
rm (brazil_state, brazil_region); gc ()
}
rm (list = ls ()); gc ()
pkgs = installed.packages ()
if (!('tidyverse' %in% pkgs)) install.packages ('tidyverse')
if (!('magrittr' %in% pkgs)) install.packages ('magrittr')
if (!('geobr' %in% pkgs)) install.packages ('geobr')
library (tidyverse)
library (magrittr)
library (geobr)
setwd ('C:/Users/alexa/Desktop/HIST_PAINEL_COVIDBR_26abr2022')
covid1.2020 <- read_csv2 ('HIST_PAINEL_COVIDBR_2020_Parte1_26abr2022.csv'
, col_types = cols_only (regiao = col_character ()
, estado = col_character ()
, municipio = col_character ()
, coduf = col_integer ()
, codmun = col_integer ()
, data = col_date ()
, semanaEpi = col_integer ()
, populacaoTCU2019 = col_integer ()
, casosAcumulado = col_integer ()
, casosNovos = col_integer ()
, obitosAcumulado = col_integer ()
, obitosNovos = col_integer ()
, Recuperadosnovos = col_integer ()
, emAcompanhamentoNovos = col_integer()
)
)
covid2.2020 <- read_csv2 ('HIST_PAINEL_COVIDBR_2020_Parte2_26abr2022.csv'
, col_types = cols_only (regiao = col_character ()
, estado = col_character ()
, municipio = col_character ()
, coduf = col_integer ()
, codmun = col_integer ()
, data = col_date ()
, semanaEpi = col_integer ()
, populacaoTCU2019 = col_integer ()
, casosAcumulado = col_integer ()
, casosNovos = col_integer ()
, obitosAcumulado = col_integer ()
, obitosNovos = col_integer ()
, Recuperadosnovos = col_integer ()
, emAcompanhamentoNovos = col_integer()
)
)
covid1.2021 <- read_csv2 ('HIST_PAINEL_COVIDBR_2021_Parte1_26abr2022.csv'
, col_types = cols_only (regiao = col_character ()
, estado = col_character ()
, municipio = col_character ()
, coduf = col_integer ()
, codmun = col_integer ()
, data = col_date ()
, semanaEpi = col_integer ()
, populacaoTCU2019 = col_integer ()
, casosAcumulado = col_integer ()
, casosNovos = col_integer ()
, obitosAcumulado = col_integer ()
, obitosNovos = col_integer ()
, Recuperadosnovos = col_integer ()
, emAcompanhamentoNovos = col_integer()
)
)
covid2.2021 <- read_csv2 ('HIST_PAINEL_COVIDBR_2021_Parte2_26abr2022.csv'
, col_types = cols_only (regiao = col_character ()
, estado = col_character ()
, municipio = col_character ()
, coduf = col_integer ()
, codmun = col_integer ()
, data = col_date ()
, semanaEpi = col_integer ()
, populacaoTCU2019 = col_integer ()
, casosAcumulado = col_integer ()
, casosNovos = col_integer ()
, obitosAcumulado = col_integer ()
, obitosNovos = col_integer ()
, Recuperadosnovos = col_integer ()
, emAcompanhamentoNovos = col_integer()
)
)
covid1.2022 <- read_csv2 ('HIST_PAINEL_COVIDBR_2022_Parte1_26abr2022.csv'
, col_types = cols_only (regiao = col_character ()
, estado = col_character ()
, municipio = col_character ()
, coduf = col_integer ()
, codmun = col_integer ()
, data = col_date ()
, semanaEpi = col_integer ()
, populacaoTCU2019 = col_integer ()
, casosAcumulado = col_integer ()
, casosNovos = col_integer ()
, obitosAcumulado = col_integer ()
, obitosNovos = col_integer ()
, Recuperadosnovos = col_integer ()
, emAcompanhamentoNovos = col_integer()
)
)
covid2019 <- rbind (covid1.2020, covid2.2020
, covid1.2021, covid2.2021
, covid1.2022
)
rm (covid1.2020, covid2.2020
, covid1.2021, covid2.2021
, covid1.2022
); gc ()
covid2019 %<>% rename (region = regiao
, state = estado
, municipality = municipio
, date = data
, epidWeek = semanaEpi
, population = populacaoTCU2019
, accumCases = casosAcumulado
, newCases = casosNovos
, accumDeaths = obitosAcumulado
, newDeaths = obitosNovos
, newRecov = Recuperadosnovos
, followUp = emAcompanhamentoNovos
); gc ()
region <- read_region (year = 2020); gc ()
region %<>% select (-c (code_region
)
); gc ()
region %<>% rename (region = name_region)
state <- read_state (code_state = 'all', year = 2020); gc ()
state %<>% select (-c (abbrev_state, name_state, code_region
, name_region
)
); gc ()
state %<>% rename (coduf = code_state)
municipality <- read_municipality (code_muni = 'all', year = 2020); gc ()
municipality %<>% select (- c(name_muni, code_state, abbrev_state
, name_state, code_region, name_region
)
); gc ()
municipality %<>% rename (codmun = code_muni)
setwd ('D:/OneDrive/academic/PackagesR/covid19Brazil/covid19Brazil/csv')
brazil_total <- covid2019 %>% subset (region == 'Brasil'); gc ()
brazil_total %<>% select (-c (state, municipality, coduf, codmun)
); gc ()
setwd ('D:/OneDrive/academic/PackagesR/covid19Brazil/covid19Brazil/data')
setwd ('D:/OneDrive/academic/PackagesR/covid19Brazil/covid19Brazil/data')
save (brazil_total, file = 'brazil_total.rda')
rm (brazil_total); gc ()
covid2019 %<>% mutate (codmun = ifelse (!is.na (codmun), codmun, 0
)
)
brazil_state <- covid2019 %>% subset (state != 'NA' &
codmun == 0
); gc ()
brazil_state %<>% select (-c (municipality, codmun)
); gc ()
save (brazil_state, file = 'brazil_state.rda')
brazil_municipality <- covid2019 %>% subset (municipality != 'NA'
); gc ()
setwd ('D:/OneDrive/academic/PackagesR/covid19Brazil/covid19Brazil/data')
save (brazil_municipality, file = 'brazil_municipality.rda')
brazil_region <- state_total %>% group_by (region, date) %>%
summarise (population = sum (population)
, accumCases = sum (accumCases)
, newCases = sum (newCases)
, accumDeaths = sum (accumDeaths)
, newDeaths = sum (newDeaths)
, newRecov = sum (newRecov)
, followUp = sum (followUp)
)
brazil_region <- brazil_state %>% group_by (region, date) %>%
summarise (population = sum (population)
, accumCases = sum (accumCases)
, newCases = sum (newCases)
, accumDeaths = sum (accumDeaths)
, newDeaths = sum (newDeaths)
, newRecov = sum (newRecov)
, followUp = sum (followUp)
)
setwd ('D:/OneDrive/academic/PackagesR/covid19Brazil/covid19Brazil/data')
save (brazil_region, file = 'brazil_region.rda')
library (covid19brazil)
data ("brazil_region")
data (brazil_region)
library (covid19italy)
data ("italy_province")
head (italy_province)
head (brazil_region)
rm (list = ls ()); gc ()
library (covid19brazil)
data ("brazil_region")
View(brazil_region)
data ("brazil_state")
View(brazil_state)
library (covid19brazil)
data ("brazil_municipality")
View(brazil_municipality)
rm (list = ls ())
rm (list = ls ()); gc ()
pkgs = installed.packages ()
if (!('tidyverse' %in% pkgs)) install.packages ('tidyverse')
if (!('magrittr' %in% pkgs)) install.packages ('magrittr')
if (!('geobr' %in% pkgs)) install.packages ('geobr')
library (tidyverse)
library (magrittr)
library (geobr)
region <- read_region (year = 2020); gc ()
region
View(region)
